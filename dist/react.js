"use strict";var ue=Object.defineProperty;var i=(c,t)=>ue(c,"name",{value:t,configurable:!0});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const p=require("react");var T={exports:{}},v={};var H;function ce(){if(H)return v;H=1;var c=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,l,o){var a=null;if(o!==void 0&&(a=""+o),l.key!==void 0&&(a=""+l.key),"key"in l){o={};for(var u in l)u!=="key"&&(o[u]=l[u])}else o=l;return l=o.ref,{$$typeof:c,type:r,key:a,ref:l!==void 0?l:null,props:o}}return i(n,"jsxProd"),v.Fragment=t,v.jsx=n,v.jsxs=n,v}i(ce,"requireReactJsxRuntime_production");var R={};var W;function de(){return W||(W=1,process.env.NODE_ENV!=="production"&&(function(){function c(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ie?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case Q:return"Profiler";case Z:return"StrictMode";case ne:return"Suspense";case re:return"SuspenseList";case ae:return"Activity"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case X:return"Portal";case ee:return e.displayName||"Context";case K:return(e._context.displayName||"Context")+".Consumer";case te:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oe:return s=e.displayName||null,s!==null?s:c(e.type)||"Memo";case M:s=e._payload,e=e._init;try{return c(e(s))}catch{}}return null}i(c,"getComponentNameFromType");function t(e){return""+e}i(t,"testStringCoercion");function n(e){try{t(e);var s=!1}catch{s=!0}if(s){s=console;var d=s.error,f=typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return d.call(s,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",f),t(e)}}i(n,"checkKeyStringCoercion");function r(e){if(e===A)return"<>";if(typeof e=="object"&&e!==null&&e.$$typeof===M)return"<...>";try{var s=c(e);return s?"<"+s+">":"<...>"}catch{return"<...>"}}i(r,"getTaskName");function l(){var e=S.A;return e===null?null:e.getOwner()}i(l,"getOwner");function o(){return Error("react-stack-top-frame")}i(o,"UnknownOwner");function a(e){if(V.call(e,"key")){var s=Object.getOwnPropertyDescriptor(e,"key").get;if(s&&s.isReactWarning)return!1}return e.key!==void 0}i(a,"hasValidKey");function u(e,s){function d(){F||(F=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",s))}i(d,"warnAboutAccessingKey"),d.isReactWarning=!0,Object.defineProperty(e,"key",{get:d,configurable:!0})}i(u,"defineKeyPropWarningGetter");function g(){var e=c(this.type);return $[e]||($[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),e=this.props.ref,e!==void 0?e:null}i(g,"elementRefGetterWithDeprecationWarning");function b(e,s,d,f,_,k){var m=d.ref;return e={$$typeof:Y,type:e,key:s,props:d,_owner:f},(m!==void 0?m:null)!==null?Object.defineProperty(e,"ref",{enumerable:!1,get:g}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:_}),Object.defineProperty(e,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:k}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}i(b,"ReactElement");function h(e,s,d,f,_,k){var m=s.children;if(m!==void 0)if(f)if(se(m)){for(f=0;f<m.length;f++)y(m[f]);Object.freeze&&Object.freeze(m)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else y(m);if(V.call(s,"key")){m=c(e);var E=Object.keys(s).filter(function(le){return le!=="key"});f=0<E.length?"{key: someKey, "+E.join(": ..., ")+": ...}":"{key: someKey}",G[m+f]||(E=0<E.length?"{"+E.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,f,m,E,m),G[m+f]=!0)}if(m=null,d!==void 0&&(n(d),m=""+d),a(s)&&(n(s.key),m=""+s.key),"key"in s){d={};for(var I in s)I!=="key"&&(d[I]=s[I])}else d=s;return m&&u(d,typeof e=="function"?e.displayName||e.name||"Unknown":e),b(e,m,d,l(),_,k)}i(h,"jsxDEVImpl");function y(e){L(e)?e._store&&(e._store.validated=1):typeof e=="object"&&e!==null&&e.$$typeof===M&&(e._payload.status==="fulfilled"?L(e._payload.value)&&e._payload.value._store&&(e._payload.value._store.validated=1):e._store&&(e._store.validated=1))}i(y,"validateChildKeys");function L(e){return typeof e=="object"&&e!==null&&e.$$typeof===Y}i(L,"isValidElement");var P=p,Y=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),ie=Symbol.for("react.client.reference"),S=P.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=Object.prototype.hasOwnProperty,se=Array.isArray,C=console.createTask?console.createTask:function(){return null};P={react_stack_bottom_frame:i(function(e){return e()},"react_stack_bottom_frame")};var F,$={},z=P.react_stack_bottom_frame.bind(P,o)(),U=C(r(o)),G={};R.Fragment=A,R.jsx=function(e,s,d){var f=1e4>S.recentlyCreatedOwnerStacks++;return h(e,s,d,!1,f?Error("react-stack-top-frame"):z,f?C(r(e)):U)},R.jsxs=function(e,s,d){var f=1e4>S.recentlyCreatedOwnerStacks++;return h(e,s,d,!0,f?Error("react-stack-top-frame"):z,f?C(r(e)):U)}})()),R}i(de,"requireReactJsxRuntime_development");var J;function fe(){return J||(J=1,process.env.NODE_ENV==="production"?T.exports=ce():T.exports=de()),T.exports}i(fe,"requireJsxRuntime");var D=fe();function w(c,t,n,r){function l(o){return o instanceof n?o:new n(function(a){a(o)})}return i(l,"adopt"),new(n||(n=Promise))(function(o,a){function u(h){try{b(r.next(h))}catch(y){a(y)}}i(u,"fulfilled");function g(h){try{b(r.throw(h))}catch(y){a(y)}}i(g,"rejected");function b(h){h.done?o(h.value):l(h.value).then(u,g)}i(b,"step"),b((r=r.apply(c,[])).next())})}i(w,"__awaiter");let N={};function me(c){const t=N[c];if(t)return t;const n=new Promise((r,l)=>{const o=document.createElement("script");o.src=c,o.async=!0;const a=i(()=>{r()},"onScriptLoad"),u=i(()=>{g(),delete N[c],o.remove(),l(new Error(`Unable to load script ${c}`))},"onScriptError");o.addEventListener("load",a),o.addEventListener("error",u),document.body.appendChild(o);function g(){o.removeEventListener("load",a),o.removeEventListener("error",u)}i(g,"cleanup")});return N[c]=n,n}i(me,"loadScript");const j=class j{constructor(t){this.handleClick=n=>w(this,void 0,void 0,function*(){const r=this.config;if(!r)throw new Error("google-pay-button: Missing configuration");const l=this.createLoadPaymentDataRequest(r);try{if(r.onClick&&r.onClick(n),n.defaultPrevented)return;const o=yield this.client.loadPaymentData(l);r.onLoadPaymentData&&r.onLoadPaymentData(o)}catch(o){o.statusCode==="CANCELED"?r.onCancel&&r.onCancel(o):r.onError?r.onError(o):console.error(o)}}),this.options=t}getElement(){return this.element}isGooglePayLoaded(){var t,n;return"google"in(window||global)&&!!(!((n=(t=google==null?void 0:google.payments)===null||t===void 0?void 0:t.api)===null||n===void 0)&&n.PaymentsClient)}mount(t){var n;return w(this,void 0,void 0,function*(){if(!this.isGooglePayLoaded())try{yield me("https://pay.google.com/gp/p/js/pay.js")}catch(r){!((n=this.config)===null||n===void 0)&&n.onError?this.config.onError(r):console.error(r);return}this.element=t,t&&(this.appendStyles(),this.config&&this.updateElement())})}unmount(){this.element=void 0}configure(t){let n;return this.config=t,(!this.oldInvalidationValues||this.isClientInvalidated(t))&&(n=this.updateElement()),this.oldInvalidationValues=this.getInvalidationValues(t),n??Promise.resolve()}createClientOptions(t){const n={environment:t.environment,merchantInfo:this.createMerchantInfo(t)};return(t.onPaymentDataChanged||t.onPaymentAuthorized)&&(n.paymentDataCallbacks={},t.onPaymentDataChanged&&(n.paymentDataCallbacks.onPaymentDataChanged=r=>t.onPaymentDataChanged(r)||{}),t.onPaymentAuthorized&&(n.paymentDataCallbacks.onPaymentAuthorized=r=>t.onPaymentAuthorized(r)||{})),n}createIsReadyToPayRequest(t){const n=t.paymentRequest;return{apiVersion:n.apiVersion,apiVersionMinor:n.apiVersionMinor,allowedPaymentMethods:n.allowedPaymentMethods,existingPaymentMethodRequired:t.existingPaymentMethodRequired}}createLoadPaymentDataRequest(t){return Object.assign(Object.assign({},t.paymentRequest),{merchantInfo:this.createMerchantInfo(t)})}createMerchantInfo(t){const n=Object.assign({},t.paymentRequest.merchantInfo);return n.softwareInfo||(n.softwareInfo={id:this.options.softwareInfoId,version:this.options.softwareInfoVersion}),n}isMounted(){return this.element!=null&&this.element.isConnected!==!1}removeButton(){if(this.element instanceof ShadowRoot||this.element instanceof Element)for(const t of Array.from(this.element.children))t.tagName!=="STYLE"&&t.remove()}updateElement(){return w(this,void 0,void 0,function*(){if(!this.isMounted())return;const t=this.getElement();if(!this.config)throw new Error("google-pay-button: Missing configuration");this.removeButton();try{this.client=new google.payments.api.PaymentsClient(this.createClientOptions(this.config))}catch(u){this.config.onError?this.config.onError(u):console.error(u);return}const n={buttonType:this.config.buttonType,buttonColor:this.config.buttonColor,buttonRadius:this.config.buttonRadius,buttonSizeMode:this.config.buttonSizeMode,buttonLocale:this.config.buttonLocale,buttonBorderType:this.config.buttonBorderType,onClick:this.handleClick,allowedPaymentMethods:this.config.paymentRequest.allowedPaymentMethods},r=t.getRootNode();r instanceof ShadowRoot&&(n.buttonRootNode=r);const l=this.client.createButton(n);this.setClassName(t,[t.className,"not-ready"]),t.appendChild(l);let o=!1,a;try{a=yield this.client.isReadyToPay(this.createIsReadyToPayRequest(this.config)),o=a.result&&!this.config.existingPaymentMethodRequired||a.result&&a.paymentMethodPresent&&this.config.existingPaymentMethodRequired||!1}catch(u){this.config.onError?this.config.onError(u):console.error(u)}if(this.isMounted()){if(o){try{this.client.prefetchPaymentData(this.createLoadPaymentDataRequest(this.config))}catch(u){console.log("Error with prefetch",u)}this.setClassName(t,(t.className||"").split(" ").filter(u=>u&&u!=="not-ready"))}if((this.isReadyToPay!==a?.result||this.paymentMethodPresent!==a?.paymentMethodPresent)&&(this.isReadyToPay=!!a?.result,this.paymentMethodPresent=a?.paymentMethodPresent,this.config.onReadyToPayChange)){const u={isButtonVisible:o,isReadyToPay:this.isReadyToPay};this.paymentMethodPresent&&(u.paymentMethodPresent=this.paymentMethodPresent),this.config.onReadyToPayChange(u)}}})}setClassName(t,n){const r=n.filter(l=>l).join(" ");r?t.className=r:t.removeAttribute("class")}appendStyles(){var t,n,r;if(typeof document>"u")return;const l=(t=this.element)===null||t===void 0?void 0:t.getRootNode(),o=`default-google-style-${this.options.cssSelector.replace(/[^\w-]+/g,"")}-${(n=this.config)===null||n===void 0?void 0:n.buttonLocale}`;if(l&&!(!((r=l.getElementById)===null||r===void 0)&&r.call(l,o))){const a=document.createElement("style");a.id=o,a.type="text/css",a.innerHTML=`
          ${this.options.cssSelector} {
            display: inline-block;
          }
          ${this.options.cssSelector}.not-ready {
            width: 0;
            height: 0;
            overflow: hidden;
          }
        `,l instanceof Document&&l.head?l.head.appendChild(a):l.appendChild(a)}}isClientInvalidated(t){return this.oldInvalidationValues?this.getInvalidationValues(t).some((r,l)=>JSON.stringify(r)!==JSON.stringify(this.oldInvalidationValues[l])):!0}getInvalidationValues(t){var n,r;return[t.environment,t.existingPaymentMethodRequired,!!t.onPaymentDataChanged,!!t.onPaymentAuthorized,t.buttonType,t.buttonColor,t.buttonRadius,t.buttonLocale,t.buttonSizeMode,t.buttonBorderType,t.paymentRequest.merchantInfo.merchantId,t.paymentRequest.merchantInfo.merchantName,(n=t.paymentRequest.merchantInfo.softwareInfo)===null||n===void 0?void 0:n.id,(r=t.paymentRequest.merchantInfo.softwareInfo)===null||r===void 0?void 0:r.version,t.paymentRequest.allowedPaymentMethods]}};i(j,"ButtonManager");let O=j;var he="@google-pay/button-react",pe="3.2.1";const B="google-pay-button-container",q=class q extends p.Component{constructor(){super(...arguments),this.manager=new O({cssSelector:`.${B}`,softwareInfoId:he,softwareInfoVersion:pe}),this.elementRef=p.createRef()}componentDidMount(){return w(this,void 0,void 0,function*(){const t=this.elementRef.current;t&&(yield this.manager.configure(this.props),yield this.manager.mount(t))})}componentWillUnmount(){this.manager.unmount()}componentDidUpdate(){this.manager.configure(this.props)}render(){return p.createElement("div",{ref:this.elementRef,className:[B,this.props.className].filter(t=>t).join(" "),style:this.props.style})}};i(q,"GooglePayButton");let x=q;function ye(c){return c}i(ye,"createMessage");function Ee({iframeRef:c}){c.current?.contentWindow?.postMessage({type:"GENERATE_ENCRYPTED_PAYMENT_METHOD"},"*")}i(Ee,"generateEncryptedPaymentMethod");function ge({ref:c,renderToken:t,onEncryptedPaymentMethodGenerated:n,origin:r}){const[l,o]=p.useState("212px");return p.useEffect(()=>{function a(u){switch(u.data.type){case"UPDATE_HEIGHT":o(u.data.height);break;case"GENERATE_ENCRYPTED_PAYMENT_METHOD":u.data.paymentMethod&&n({paymentMethod:u.data.paymentMethod});break}}return i(a,"handleMessage"),window.addEventListener("message",a),()=>{window.removeEventListener("message",a)}}),D.jsx("iframe",{ref:c,title:"Secure credit card payment method form powered by SubFi",name:"subfi-credit-card-payment-method-form",role:"presentation",src:`${r}/iframe/card?token=${t}`,style:{width:"calc(100% + 8px)",transition:"height 200ms ease-in-out",margin:"0 -4px",height:l},scrolling:"no"})}i(ge,"SubFiCreditCardPaymentMethodForm");function be({ref:c,renderToken:t,onEncryptedPaymentMethodGenerated:n,origin:r}){const[l,o]=p.useState("320px");return p.useEffect(()=>{function a(u){switch(u.data.type){case"UPDATE_HEIGHT":o(u.data.height);break;case"GENERATE_ENCRYPTED_PAYMENT_METHOD":u.data.paymentMethod&&n({paymentMethod:u.data.paymentMethod});break}}return i(a,"handleMessage"),window.addEventListener("message",a),()=>{window.removeEventListener("message",a)}}),D.jsx("iframe",{ref:c,title:"Secure bank account payment method form powered by SubFi",name:"subfi-bank-account-payment-method-form",role:"presentation",src:`${r}/iframe/bank?token=${t}`,style:{width:"calc(100% + 8px)",transition:"height 200ms ease-in-out",margin:"0 -4px",height:l},scrolling:"no"})}i(be,"SubFiBankAccountPaymentMethodForm");function ve({onEncryptedPaymentMethodGenerated:c,...t}){return D.jsx(x,{paymentRequest:{emailRequired:!0,allowedPaymentMethods:[{parameters:{allowedAuthMethods:["CRYPTOGRAM_3DS","PAN_ONLY"],allowedCardNetworks:["AMEX","DISCOVER","MASTERCARD","VISA"],billingAddressRequired:!0,billingAddressParameters:{format:"FULL",phoneNumberRequired:!1},cvcRequired:!1},tokenizationSpecification:{parameters:{gateway:"anedot",gatewayMerchantId:"anedot"},type:"PAYMENT_GATEWAY"},type:"CARD"}],callbackIntents:["PAYMENT_AUTHORIZATION","SHIPPING_ADDRESS"],apiVersion:2,apiVersionMinor:0,merchantInfo:t.merchantInfo,transactionInfo:t.transactionInfo,shippingAddressRequired:!0},onLoadPaymentData:i(n=>{c({paymentMethod:{billing_address_attributes:{name:n.paymentMethodData.info?.billingAddress?.name,address_line1:n.paymentMethodData.info?.billingAddress?.address1,address_line2:n.paymentMethodData.info?.billingAddress?.address2,city:n.paymentMethodData.info?.billingAddress?.locality,state:n.paymentMethodData.info?.billingAddress?.administrativeArea,postal_code:n.paymentMethodData.info?.billingAddress?.postalCode,country:n.paymentMethodData.info?.billingAddress?.countryCode,email:n.email,phone:n.paymentMethodData.info?.billingAddress?.phoneNumber},card_profile_attributes:{wallet_provider:"googlepay",wallet_payload:n.paymentMethodData.tokenizationData.token,last_four:n.paymentMethodData.info?.cardDetails,wallet_brand:(()=>{switch(n.paymentMethodData.info?.cardNetwork){case"AMEX":return"american_express";case"VISA":return"visa";case"MASTERCARD":return"master";case"DISCOVER":return"discover";default:return}})()}},shippingAddress:n.shippingAddress,email:n.email})},"onLoadPaymentData"),...t})}i(ve,"SubFiGooglePayPaymentMethod");exports.SubFiBankAccountPaymentMethodForm=be;exports.SubFiCreditCardPaymentMethodForm=ge;exports.SubFiGooglePayPaymentMethod=ve;exports.createMessage=ye;exports.generateEncryptedPaymentMethod=Ee;
